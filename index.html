<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>WE604 Sample</title>
    <!-- update the version number as needed -->
    <script src="js/firebase.js"></script>
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
 
  </head>
  <body>
  <form>
    <div>
      <input id="email" type="text" placeholder="Email...">
    </div>
    <div>
      <input id="password" type="password" placeholder="Password...">
    </div>
    <div>
      <button id="sign-in">Sign In/Register</button>
      <button id="sign-out">Sign Out</button>
    </div>
  </form>

  <!--Include firebase.js  -->
  <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
  
  <!--Configure firebase-->
  <script>
    // Visit https://console.firebase.google.com/project/<your project id>/overview and click on "Add Firebase to your web app"
    var config = {
    	apiKey: "AIzaSyDfDzYmNdaR6LUsNMUdUSWOp4YM4LNQTag",
    	authDomain: "project-90ba1.firebaseapp.com",
    	databaseURL: "https://project-90ba1.firebaseio.com",
    	projectId: "project-90ba1",
    	storageBucket: "project-90ba1.appspot.com",
   	 	messagingSenderId: "469363510677"
  	};
  	firebase.initializeApp(config);
  </script>

  <!--Handle auth events-->
  <script>
    firebase.auth().onAuthStateChanged(function(user) {
      window.user = user;
      // Step 1:
      //  If no user, sign in anonymously with firebase.auth().signInAnonymously()
      //  If there is a user, log out out user details for debugging purposes.
    });
  </script>
  
  <!--Handle page events-->
  <script>    
    document.querySelector('sign-in').addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      var email = document.querySelector('email').value;
      var password = document.querySelector('password').value
      var credential = firebase.auth.EmailAuthProvider.credential(email, password);
      var auth = firebase.auth();
      var currentUser = auth.currentUser;
      
      // Step 2
      //  Get a credential with firebase.auth.emailAuthProvider.credential(emailInput.value, passwordInput.value)
      //  If there is no current user, log in with auth.signInWithCredential(credential)
      //  If there is a current user an it's anonymous, atttempt to link the new user with firebase.auth().currentUser.link(credential) 
      //  The user link will fail if the user has already been created, so catch the error and sign in.
    });
    
    document.querySelector('sign-out').addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      firebase.auth().signOut();
    });
  </script>
  
  
  	<!--<button type="button" name="button" onClick="facebookSignin()">Login Your Facebook</button>
    <button type="button" name="button" onClick="logoutFacebook()">Log out</button>
	<script src="https://www.gstatic.com/firebasejs/5.9.2/firebase.js"></script>
	<script>
  	// Initialize Firebase
  		var config = {
    	apiKey: "AIzaSyDfDzYmNdaR6LUsNMUdUSWOp4YM4LNQTag",
    	authDomain: "project-90ba1.firebaseapp.com",
    	databaseURL: "https://project-90ba1.firebaseio.com",
    	projectId: "project-90ba1",
    	storageBucket: "project-90ba1.appspot.com",
   	 	messagingSenderId: "469363510677"
  	};
  	firebase.initializeApp(config);
	var provider = new firebase.auth.FacebookAuthProvider();
		function facebookSignin(){
			firebase.auth().signInWithPopup(provider)
				.then(function(result){
					var token = result.credential.accessToken;
					var user = result.user;
					
					console.log(token)
					console.log(user)
				}).catch(function(error){
					console.log(error.code);
					console.log(error.message);
				});
		}
		function logoutFacebook(){
			firebase.auth().signOut()
			.then(function(){
				console.log('Signout successful!')
			}, function(error){
				console.log('Signout failed')
			});
		}
	</script>-->
    
  	<!--<main class="mdl-layout__content">
    	<div class="page-content">
    		<p id="contact-success" class="text-success lead"></p>
    		<p id="contact-error" class="text-danger lead"></p>
    			<div align="center" style="padding-top: 20px;">
    				<form id="contact-form" role="form" onsubmit="return sendData(this)">
      				<table class="mdl-data-table mdl-js-data-table">
      					<thead>
        					<tr>
          					<td>NAME:</td>
          						<td>
            						<div class="mdl-textfield mdl-js-textfield">
              							<input class="mdl-textfield__input" type="text" id="name" id="name">
              							<label class="mdl-textfield__label" for="name">Your Full Name...</label>
            						</div>
          						</td>
        					</tr>
       						<tr>
          					<td>Email:</td>
          						<td>
            						<div class="mdl-textfield mdl-js-textfield">
              							<input class="mdl-textfield__input" type="email" name="email" id="email">
              							<label class="mdl-textfield__label" for="email">Your Email Address...</label>
            						</div>
          						</td>
        					</tr>
        					<tr>
          					<td>Message:</td>
          						<td>
           							<div class="mdl-textfield mdl-js-textfield"> 
              						<textarea class="mdl-textfield__input" type="text" rows="4" id="message" id="message"></textarea>
              						<label class="mdl-textfield__label" for="message">Your Message...</label>
            						</div>
                                    <br/>
        						<button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" id="send-data" type="submit" >Submit Data</button>
          						</td>
        					</tr>
      					</thead>
    				</table>
    				</form>
    			</div>
   		</div>
  	</main>
</div>

<script>
	var contactFrom = document.getElementById('contact-form');
    var contactSuccess = document.getElementById('contact-success');
    var contactError = document.getElementById('contact-error');
    var sendBtn = document.getElementById('send-data');
    var onMessageComplete = function(error) {
    	sendBtn.disabled = false;
      		if (error) {
        	contactError.innerHTML = 'Sorry. Could not send Data.';
      		} else {
        	contactSuccess.innerHTML = "Success !";
        	// hide the form
        	contactFrom.style.display = 'none';
      			}
    		};
    	function sendData(formObj) {
        	var myFirebaseRef = new Firebase("https://project-90ba1.firebaseio.com/");
        	myFirebaseRef.push({
          	name: formObj.name.value,
          	email: formObj.email.value,
          	message: formObj.message.value
        	}, onMessageComplete);
        	sendBtn.disabled = true;
        	return false;
    		}
		</script>-->
	</body>
</html>